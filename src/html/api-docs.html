<!DOCTYPE html>
<html>
    <head>
        <title>xrit-rx API Documentation</title>

        <link href='https://fonts.googleapis.com/css?f                    <div class="api-endpoint">
                        <code>curl http://localhost:8080/api/current/progress</code>
                        <p>Get real-time download progress for active multi-segment products</p>
                    </div>

                    <div class="api-endpoint">
                        <code>curl http://localhost:8080/api/latest/fd/partial --output partial_fd.jpg</code>
                        <p>Download partial/preview image of currently downloading Full Disk image</p>
                    </div>y=Roboto' rel='stylesheet'>
        <link rel="stylesheet" href="css/dash.css" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    </head>

    <body>
        <h2 id="dash-heading">
            xrit-rx API Documentation
            <span>
                <a href="/" style="color: #777; text-decoration: none; margin-right: 20px;">‚Üê Back to Dashboard</a>
                xrit-rx <a href="https://github.com/sam210723/xrit-rx" target="_blank" title="xrit-rx on GitHub">GitHub</a>
            </span>
        </h2>

        <div id="container">
            <div class="block" id="block-api-full">
                <div class="block-heading">API Documentation</div>
                <div class="block-body">
                    <h3>Available Endpoints</h3>
                    
                    <h4>System Information</h4>
                    <div class="api-endpoint">
                        <code>GET /api</code>
                        <p>Returns system configuration and status information</p>
                    </div>

                    <h4>Current Status</h4>
                    <div class="api-endpoint">
                        <code>GET /api/current/vcid</code>
                        <p>Returns the currently processing Virtual Channel ID</p>
                    </div>

                    <div class="api-endpoint">
                        <code>GET /api/current/progress</code>
                        <p>Returns real-time download progress for all active multi-segment products</p>
                    </div>

                    <div class="api-endpoint">
                        <code>GET /api/current/partial</code>
                        <p>Returns information about available partial/preview images for active downloads</p>
                    </div>

                    <h4>Latest Images</h4>
                    <div class="api-endpoint">
                        <code>GET /api/latest/image</code>
                        <p>Returns metadata for the most recent image of any type</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <code>GET /api/latest/{type}</code>
                        <p>Returns metadata for the most recent image of a specific type</p>
                        <small>Replace {type} with one of the image types below</small>
                    </div>

                    <div class="api-endpoint">
                        <code>GET /api/latest/{type}/image</code>
                        <p>Returns the actual image file for the most recent image of a specific type</p>
                    </div>

                    <div class="api-endpoint">
                        <code>GET /api/latest/{type}/partial</code>
                        <p>Returns partial/preview image file for actively downloading products (shows segments received so far)</p>
                    </div>

                    <h4>Expected Image Types</h4>
                    <div class="image-types">
                        <div class="image-type">
                            <strong>FD</strong> - Full Disk imagery covering the entire Earth hemisphere
                        </div>
                        <div class="image-type">
                            <strong>SICEF24</strong> - Sea Ice and Cloud Edge Forecast (24-hour)
                        </div>
                        <div class="image-type">
                            <strong>SICEF48</strong> - Sea Ice and Cloud Edge Forecast (48-hour)
                        </div>
                        <div class="image-type">
                            <strong>SSTF24</strong> - Sea Surface Temperature Forecast (24-hour)
                        </div>
                        <div class="image-type">
                            <strong>SSTF48</strong> - Sea Surface Temperature Forecast (48-hour)
                        </div>
                        <div class="image-type">
                            <strong>SSTF72</strong> - Sea Surface Temperature Forecast (72-hour)
                        </div>
                        <div class="image-type">
                            <strong>FOGVIS</strong> - Fog Visibility forecast imagery
                        </div>
                        <div class="image-type">
                            <strong>COMSFOG</strong> - Communication Satellite Fog imagery
                        </div>
                        <div class="image-type">
                            <strong>FCT</strong> - Forecast data products
                        </div>
                        <div class="image-type">
                            <strong>GWW3F</strong> - Global Wave Watch III Forecast
                        </div>
                        <div class="image-type">
                            <strong>RWW3A</strong> - Regional Wave Watch III Analysis
                        </div>
                        <div class="image-type">
                            <strong>SUFA03</strong> - Surface Analysis (3-hour)
                        </div>
                        <div class="image-type">
                            <strong>ADD</strong> - Additional data products and supplementary imagery
                        </div>
                    </div>

                    <h4>Other Data</h4>
                    <div class="api-endpoint">
                        <code>GET /api/latest/xrit</code>
                        <p>Returns metadata for the most recent xRIT file</p>
                    </div>

                    <div class="api-endpoint">
                        <code>GET /api/docs</code>
                        <p>Returns comprehensive API documentation in JSON format</p>
                    </div>

                    <h4>Response Format</h4>
                    <p>All API endpoints return JSON responses except for image file endpoints which return the raw image data with appropriate MIME types.</p>

                    <h4>Example Usage</h4>
                    <div class="api-endpoint">
                        <code>curl http://localhost:1692/api</code>
                        <p>Get system configuration and status</p>
                    </div>

                    <div class="api-endpoint">
                        <code>curl http://localhost:1692/api/latest/fd</code>
                        <p>Get metadata for the latest Full Disk image</p>
                    </div>

                    <div class="api-endpoint">
                        <code>curl http://localhost:1692/api/latest/fd/image --output latest_fd.jpg</code>
                        <p>Download the latest Full Disk image file</p>
                    </div>

                    <div class="api-endpoint">
                        <code>curl http://localhost:1692/api/current/progress</code>
                        <p>Get real-time download progress for active multi-segment products</p>
                    </div>

                    <h4>Error Responses</h4>
                    <p>When a resource is not found or an error occurs, the API returns appropriate HTTP status codes:</p>
                    <ul>
                        <li><strong>200 OK</strong> - Request successful</li>
                        <li><strong>404 Not Found</strong> - Resource not available or doesn't exist</li>
                        <li><strong>500 Internal Server Error</strong> - Server error occurred</li>
                    </ul>

                    <h4>CORS Support</h4>
                    <p>The API supports Cross-Origin Resource Sharing (CORS) for web applications making requests from different domains.</p>
                </div>
            </div>
        </div>
    </body>
</html>
